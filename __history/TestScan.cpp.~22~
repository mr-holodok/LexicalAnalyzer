#pragma hdrstop
#pragma argsused

#ifdef _WIN32
#include <tchar.h>
#else
  typedef char _TCHAR;
  #define _tmain main
#endif

#include <stdio.h>
#include <iostream.h>
#include "Scanner.h"
#include <fstream.h>
#include <conio.h>
#include <windows.h>

 int _tmain(int argc, _TCHAR* argv[])
{
	SetConsoleCP(1251); // Ввод с консоли в кодировке 1251
	SetConsoleOutputCP(1251); // Вывод на консоль в кодировке 1251. Нужно только будет изменить шрифт консоли на Lucida Console или Consolas
	Scanner scanner = Scanner();
	std::string filePath = "L://Embarcadero RAD Studio XE8 22.0.19027.8951 Architect//PROJECTS//Копия Scanner//TestFile.cpp";
	list<Lexem> lexList = scanner.scan(filePath);

	//=================
	//* test output
	for(list<Lexem>::iterator iter = lexList.begin();
			iter != lexList.end(); ++iter)
	{
		std::cout << "Значення: ";
		std::cout << iter->getValue() <<" ";
		std::cout << iter->getLine() << " ";
		std::cout << iter->getPosition() << " ";
		std::cout << iter->getLexType() << std::endl;
	}
	//===============

	list<ErrorMessage> errors = scanner.getErrors();
	for(list<ErrorMessage>::iterator iter = errors.begin();
			iter != errors.end(); ++iter)
	{
		std::cout << iter->getLine() << " ";
		std::cout << iter->getPos() << " ";
		std::cout << iter->getText() << std::endl;
	}
	getch();
	return 0;
}
